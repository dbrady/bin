#!/usr/bin/env ruby

# stoopid numbering hacks
# i!, j! = init and return the counter
# i, j = increment and return the counter
# i?, j? = get counter without
def i?; "#{$i}."; end
def i!; "#{$i = 1}."; end
def i; "#{ $i += 1}."; end
def j?; "#{$j}."; end
def j!; "#{$j = 1}."; end
def j; "#{ $j += 1}."; end

def checklist
  puts <<CHECKLIST
#{i!} Go to latest feature/snowflake-moveover: snow main
#{i} Find next ticket: next-ticket, DS-879, snow cplx, snow preview
#{i} MANUAL: Claim the ticket in Jira and move it to IN DEVELOPMENT
#{i} Create branches: snow new <jira_id> <job.py>
#{i} Fixup: snow auto, scow/snow-fix/snow-commit, snow -q
#{i} MANUAL: Code look good? Any new/repeated issues?
#{i} Cut config over to snowflake: snow job s
#{i} Run job: clear; snow run
#{i} MANUAL: Screenshot and move JIRA ticket to IN REVIEW
#{i} Open a PR in each repo: snow slam
#{i} MANUAL: Sanity check the PRs
  #{i?}#{j!} Doublecheck the screenshot
  #{i?}#{j} Ensure target branch is feature/snowflake-moveover
  #{i?}#{j} Ensure both PRs have no extra commits
  #{i?}#{j} Inspect file changes on GitHub
#{i} Make links: snow link <warehouse_pr> <finance_pr> [<pkg_pr>]
#{i} MANUAL: Delegate to Zack by sending him links
#{i} MANUAL: Wait on review
CHECKLIST
end

checklist
